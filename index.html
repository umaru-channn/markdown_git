<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown IDE</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="node_modules/@xterm/xterm/css/xterm.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="node_modules/katex/dist/katex.min.css" />
</head>

<body>
    <div class="ide-container" id="ide-container">
        <div class="top-bar" id="top-bar">
            <div class="top-left-controls">
                <div class="left-slot">
                    <button id="btn-toggle-leftpane" title="„Çµ„Ç§„Éâ„Éö„Ç§„É≥„ÅÆË°®Á§∫/ÈùûË°®Á§∫">‚â°</button>
                </div>
                <div class="side-switch-group">
                    <button class="side-switch active" data-target="files" id="btn-top-files" title="„Éï„Ç°„Ç§„É´">üìÑ</button>
                    <button class="side-switch" data-target="git" id="btn-top-git" title="GitÁÆ°ÁêÜ">üåø</button>
                    <button class="side-switch" data-target="outline" id="btn-top-outline" title="„Ç¢„Ç¶„Éà„É©„Ç§„É≥">üìë</button>
                </div>
            </div>
            <div class="editor-tabs" id="editor-tabs">
            </div>
            <!-- <div class="top-right-controls">
                <button id="btn-toggle-right-activity" class="window-control-btn" title="Âè≥„Éë„Éç„É´„ÅÆË°®Á§∫/ÈùûË°®Á§∫">‚ä≥</button>
                <button id="btn-minimize" class="window-control-btn" title="ÊúÄÂ∞èÂåñ">‚àí</button>
                <button id="btn-maximize" class="window-control-btn" title="ÊúÄÂ§ßÂåñ">‚ñ°</button>
                <button id="btn-close" class="window-control-btn close" title="Èñâ„Åò„Çã">‚úï</button>
            </div> -->
            <div class="top-right-controls">
                <button id="btn-toggle-right-activity" class="window-control-btn" title="Âè≥„Éë„Éç„É´„ÅÆË°®Á§∫/ÈùûË°®Á§∫">
                    <span style="font-size: 12px;">‚ó´</span>
                </button>

                <button id="btn-minimize" class="window-control-btn" title="ÊúÄÂ∞èÂåñ">
                    <svg width="10" height="10" viewBox="0 0 10.2 1">
                        <rect width="10.2" height="1" fill="currentColor" />
                    </svg>
                </button>

                <button id="btn-maximize" class="window-control-btn" title="ÊúÄÂ§ßÂåñ">
                    <svg class="icon-maximize" width="10" height="10" viewBox="0 0 10 10">
                        <path d="M0,0v10h10V0H0z M9,9H1V1h8V9z" fill="currentColor" />
                    </svg>
                    <svg class="icon-restore hidden" width="10" height="10" viewBox="0 0 10 10">
                        <path d="M2,0v2H0v8h8V8h2V0H2z M7,9H1V3h6V9z M9,7H8V2H3V1h6V7z" fill="currentColor" />
                    </svg>
                </button>

                <button id="btn-close" class="window-control-btn close" title="Èñâ„Åò„Çã">
                    <svg width="10" height="10" viewBox="0 0 10 10">
                        <polygon points="10,0.7 9.3,0 5,4.3 0.7,0 0,0.7 4.3,5 0,9.3 0.7,10 5,5.7 9.3,10 10,9.3 5.7,5"
                            fill="currentColor" />
                    </svg>
                </button>
            </div>
        </div>

        <div class="main-content">
            <div class="activity-bar">
                <div class="spacer"></div>
                <div class="icon" id="btn-zen" title="Zen„É¢„Éº„Éâ">üßò</div>
                <div class="icon" id="btn-settings" title="Ë®≠ÂÆö">‚öôÔ∏è</div>
            </div>

            <div class="left-pane" id="left-pane">
                <div class="left-pane-header" id="left-pane-header">
                    <!-- „Éï„Ç°„Ç§„É´„Ç®„ÇØ„Çπ„Éó„É≠„Éº„É©„ÉºÁî®„Éú„Çø„É≥ -->
                    <div class="header-buttons header-buttons-files" id="header-buttons-files">
                        <button id="btn-open-folder" class="header-btn" title="„Éï„Ç©„É´„ÉÄ„ÇíÈñã„Åè">üìÇ</button>
                        <button id="btn-new-file" class="header-btn" title="Êñ∞Ë¶è„Éï„Ç°„Ç§„É´„Çí‰ΩúÊàê">üìÑ</button>
                        <button id="btn-new-folder" class="header-btn" title="Êñ∞Ë¶è„Éï„Ç©„É´„ÉÄ„Çí‰ΩúÊàê">üìÅ</button>
                        <button id="btn-sort-asc" class="header-btn" title="ÊòáÈ†Ü„Åß„ÇΩ„Éº„Éà">‚ñ≤</button>
                        <button id="btn-sort-desc" class="header-btn" title="ÈôçÈ†Ü„Åß„ÇΩ„Éº„Éà">‚ñº</button>
                    </div>
                    <!-- GitÁî®„Éú„Çø„É≥ -->
                    <div class="header-buttons header-buttons-git content-hidden" id="header-buttons-git">
                        <button id="btn-git-stage" class="header-btn" title="„Åô„Åπ„Å¶„ÅÆÂ§âÊõ¥„Çí„Çπ„ÉÜ„Éº„Ç∏„É≥„Ç∞">‚úì</button>
                        <button id="btn-git-unstage" class="header-btn" title="„Åô„Åπ„Å¶„ÅÆÂ§âÊõ¥„Çí„Ç¢„É≥„Çπ„ÉÜ„Éº„Ç∏„É≥„Ç∞">‚úï</button>
                        <button id="btn-git-refresh" class="header-btn" title="Êõ¥Êñ∞">üîÑ</button>
                    </div>
                    <!-- „Ç¢„Ç¶„Éà„É©„Ç§„É≥Áî®„Éú„Çø„É≥ -->
                    <div class="header-buttons header-buttons-outline content-hidden" id="header-buttons-outline">
                        <button id="btn-outline-collapse" class="header-btn" title="„Åô„Åπ„Å¶Êäò„Çä„Åü„Åü„ÇÄ">‚àí</button>
                        <button id="btn-outline-expand" class="header-btn" title="„Åô„Åπ„Å¶Â±ïÈñã">+</button>
                    </div>
                </div>

                <!-- „Éï„Ç°„Ç§„É´„Ç®„ÇØ„Çπ„Éó„É≠„Éº„É©„Éº„ÅÆ„Ç≥„É≥„ÉÜ„Éä„Çí here „Å´Â§âÊõ¥ -->
                <div class="left-pane-content" id="content-files">
                    <div class="file-tree" id="file-tree-container">
                        <div class="tree-item expanded" data-path=".">
                            <span class="tree-toggle">‚ñº</span>
                            <span class="tree-icon">üìÇ</span>
                            <span class="tree-label"></span>
                        </div>
                        <div class="tree-children" style="display: block;"></div>
                    </div>
                </div>
                <!-- /here -->

                <!-- Git „Éë„Éç„É´ -->
                <div class="left-pane-content content-hidden" id="content-git">
                    <strong>Git: Â§âÊõ¥</strong>
                    <div class="git-section">
                        <div class="git-section-title">Â§âÊõ¥ÔºàUnstagedÔºâ</div>
                        <div class="git-file-list" id="git-unstaged"></div>
                    </div>
                    <div class="git-section">
                        <div class="git-section-title">„Çπ„ÉÜ„Éº„Ç∏Ê∏à„ÅøÔºàStagedÔºâ</div>
                        <div class="git-file-list" id="git-staged"></div>
                    </div>
                    <div class="git-commit-area">
                        <textarea id="git-message" placeholder="„Ç≥„Éü„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏..." rows="3"></textarea>
                        <button id="git-commit-btn" class="git-action-btn">Commit</button>
                        <button id="git-push-btn" class="git-action-btn">Push</button>
                    </div>
                </div>

                <!-- „Ç¢„Ç¶„Éà„É©„Ç§„É≥ -->
                <div class="left-pane-content content-hidden" id="content-outline">
                    <strong>„Ç¢„Ç¶„Éà„É©„Ç§„É≥</strong>
                    <ul id="outline-tree"></ul>
                </div>
            </div>

            <div class="center-pane" id="center-pane">
                <div class="toolbar">
                    <div class="toolbar-left">
                        <button id="bold-btn" title="Â§™Â≠ó"><b>B</b></button>
                        <button id="italic-btn" title="Êñú‰Ωì"><i>I</i></button>
                        <button title="Table">Table</button>

                        <!-- Ë¶ãÂá∫„Åó„É¨„Éô„É´ÈÅ∏Êäû -->
                        <div class="toolbar-group">
                            <select id="heading-selector" title="Ë¶ãÂá∫„Åó„É¨„Éô„É´„ÇíÈÅ∏Êäû">
                                <option value="">ÊÆµËêΩ</option>
                                <option value="h1">H1</option>
                                <option value="h2">H2</option>
                                <option value="h3">H3</option>
                                <option value="h4">H4</option>
                                <option value="h5">H5</option>
                                <option value="h6">H6</option>
                            </select>
                        </div>

                        <!-- „É™„Çπ„ÉàÈÅ∏Êäû -->
                        <div class="toolbar-group">
                            <button id="btn-bullet-list" title="Áï™Âè∑„Å™„Åó„É™„Çπ„Éà">‚Ä¢ „É™„Çπ„Éà</button>
                            <button id="btn-number-list" title="Áï™Âè∑‰ªò„Åç„É™„Çπ„Éà">1. „É™„Çπ„Éà</button>
                        </div>

                        <!-- ÈÖçÁΩÆ„Å®„Ç´„É©„Éº -->
                        <div class="toolbar-group">
                            <button id="btn-align-center" title="‰∏≠Â§ÆÊèÉ„Åà">‰∏≠Â§Æ</button>
                            <input type="color" id="color-picker" title="„ÉÜ„Ç≠„Çπ„ÉàËâ≤„ÇíÂ§âÊõ¥" value="#000000">
                        </div>
                    </div>
                    <!-- Âè≥ÂÅ¥„ÅÆ PDF„Éó„É¨„Éì„É•„Éº„Éú„Çø„É≥„ÅØÂâäÈô§ -->
                    <div class="toolbar-right">
                    </div>
                </div>

                <div class="editor-area" id="content-readme">
                    <div class="editor-wrapper">
                        <textarea id="editor" class="markdown-textarea" spellcheck="false"
                            placeholder="Markdown„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
                        <div id="preview" class="markdown-preview"></div>
                    </div>
                </div>

                <div class="settings-view-content content-hidden" id="content-settings">
                    <h1>Ë®≠ÂÆö</h1>
                    <h2>„Ç®„Éá„Ç£„Çø (Editor)</h2>
                    <div class="setting-item">
                        <label for="font-size">„Éï„Ç©„É≥„Éà„Çµ„Ç§„Ç∫</label>
                        <input type="text" id="font-size" value="16px">
                    </div>
                    <div class="setting-item">
                        <label><input type="checkbox" checked> Ëá™Âãï‰øùÂ≠ò„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                    </div>
                    <h2>Â§ñË¶≥ (Appearance)</h2>
                    <div class="setting-item">
                        <label for="theme">„ÉÜ„Éº„Éû</label>
                        <select id="theme">
                            <option value="light">„É©„Ç§„Éà</option>
                            <option value="dark">„ÉÄ„Éº„ÇØ</option>
                        </select>
                    </div>
                    <h2>PDFÂá∫Âäõ (Export)</h2>
                    <div class="setting-item">
                        <label for="paper-size">Áî®Á¥ô„Çµ„Ç§„Ç∫</label>
                        <select id="paper-size">
                            <option value="a4">A4</option>
                            <option value="letter">Letter</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="right-pane hidden" id="right-pane">
                <!-- Terminal UI Structure -->
                <div class="terminal-header" id="terminal-header">
                    <div class="terminal-tabs-container" id="terminal-tabs-container">
                        <div class="terminal-tabs-list" id="terminal-tabs-list"></div>
                        <div class="new-terminal-container">
                            <button id="new-terminal-btn" title="New Terminal">+</button>
                            <button id="dropdown-toggle" title="Select Shell">‚ñæ</button>
                        </div>
                    </div>
                </div>
                
                <!-- Shell Dropdown -->
                <div id="shell-dropdown" class="hidden"></div>

                <!-- Terminal Container -->
                <div id="terminal-container" class="terminal-content"></div>

                <div class="pdf-preview-header hidden" id="pdf-preview-header">
                    PDF„Éó„É¨„Éì„É•„Éº
                    <div class="pdf-controls">
                        <!-- <button id="pdf-prev-page" title="Ââç„ÅÆ„Éö„Éº„Ç∏">‚óÄ</button> -->
                        <span id="pdf-page-info"></span>
                        <!-- <button id="pdf-next-page" title="Ê¨°„ÅÆ„Éö„Éº„Ç∏">‚ñ∂</button> -->
                    </div>
                </div>
                <div id="pdf-preview-container" class="pdf-preview-content hidden">
                    <canvas id="pdf-canvas"></canvas>
                </div>
            </div>

            <div class="resizer" id="resizer-right"></div>

            <div class="right-activity-bar">
                <div class="icon" id="btn-terminal-right" title="„Çø„Éº„Éü„Éä„É´">üíª</div>
                <!-- Âè≥„Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£„Éê„Éº„Å´PDF„Éó„É¨„Éì„É•„Éº„Éú„Çø„É≥„ÇíËøΩÂä† -->
                <div class="icon" id="btn-pdf-preview" title="PDF„Éó„É¨„Éì„É•„Éº">üìÑ</div>
            </div>
        </div>

        <div class="bottom-pane hidden" id="bottom-pane">
            <!-- ‚òÖ‰øÆÊ≠£: ID„ÇíËøΩÂä†„Åó„Å¶JS„Åã„ÇâÊìç‰ΩúÂèØËÉΩ„Å´ -->
            <div class="terminal-header" id="bottom-terminal-header">
                „Çø„Éº„Éü„Éä„É´
            </div>
            <div id="terminal-bottom-container" class="terminal-content"></div>
        </div>

        <div class="resizer" id="resizer-bottom"></div>

        <div class="status-bar">
            <div class="status-left">
                <span class="icon">üåø main*</span>
            </div>
            <div class="status-right">
                <span id="file-stats">ÊñáÂ≠óÊï∞: 0 | Ë°åÊï∞: 0</span>
                <span class="icon" id="btn-toggle-position" title="„Çø„Éº„Éü„Éä„É´„ÅÆ‰ΩçÁΩÆ„ÇíÂàá„ÇäÊõø„Åà"> ‚óß </span>
            </div>
        </div>
    </div>

    <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

    <!-- xterm.js -->
    <script src="node_modules/@xterm/xterm/lib/xterm.js"></script>
    <script src="node_modules/@xterm/addon-fit/lib/addon-fit.js"></script>
    <script src="node_modules/@xterm/addon-web-links/lib/addon-web-links.js"></script>

    <!-- KaTeX -->
    <script src="node_modules/katex/dist/katex.min.js"></script>
    <script src="node_modules/katex/dist/contrib/auto-render.min.js"></script>

    <!-- Mermaid.js -->
    <script src="node_modules/mermaid/dist/mermaid.min.js"></script>

    <!-- Marked.js for Markdown rendering -->
    <script src="node_modules/marked/lib/marked.umd.js"></script>

    <!-- PDF.js - Load as ES module -->
    <script type="module">
        import * as pdfjsLib from './node_modules/pdfjs-dist/build/pdf.min.mjs';
        pdfjsLib.GlobalWorkerOptions.workerSrc = './node_modules/pdfjs-dist/build/pdf.worker.min.mjs';
        window.pdfjsLib = pdfjsLib;
    </script>

    <script src="./renderer.js"></script>
</body>

</html>